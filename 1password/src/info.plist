<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>cn.alanhe.1password</string>
	<key>category</key>
	<string>Self-Dev</string>
	<key>connections</key>
	<dict>
		<key>09BA5A7C-9F72-441C-95B2-46F669C53682</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>0DF753E5-DF21-4040-BC20-B06B9605360A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>10031FBB-CD36-4DDE-AA61-1642381CD7AF</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>910FCF14-BDBB-4FF7-A7B2-41014E499149</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>1F48BB68-C11E-4C91-A9DA-E19098554E9A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>2166D3DB-EF96-4C03-B95A-77D5068615D7</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>2BBDFBE4-FBBC-4506-9269-3CFB4017932C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D775FDBF-FDA2-4FDE-9007-02111D660392</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>3C6D1460-731F-4A4A-8836-8AD03743EE23</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AADC9859-4CF2-43B3-831D-940B6BCBC278</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4AFED243-84FB-4005-B115-FFD8635E6737</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>604864F3-BFC6-44E3-9B01-F23F5B25D77F</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>2AC71A21-7210-4154-AE38-29A81884BE9F</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>745206F1-E7CE-43E5-93E0-80BAC4DC608C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>C84F022F-832E-431C-8EBE-74DB981EEFB8</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>64CCFE84-CB5E-435B-960C-0599C3287084</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>C8F2743C-1389-4043-83D1-7C2750A807F8</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4FEB803E-78D2-4DAA-A493-0C499D3B3415</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>09BA5A7C-9F72-441C-95B2-46F669C53682</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>5526B8BB-14D0-4271-94CE-0C7C2A1DC4E7</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>5B779377-8A0B-4819-9840-611C663A1004</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>E0E63366-C846-4EB6-8625-9CCDD1637737</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>A8711759-B066-4A18-BB55-8A825C6FC01E</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>5D3655AA-08CC-45D8-8B7B-ED639939DF1F</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>0DF753E5-DF21-4040-BC20-B06B9605360A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>5F00C180-A092-46F1-96FB-DD891562A2A8</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5D3655AA-08CC-45D8-8B7B-ED639939DF1F</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>2BBDFBE4-FBBC-4506-9269-3CFB4017932C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>604864F3-BFC6-44E3-9B01-F23F5B25D77F</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>36A773EE-B145-4579-B70F-6D286604C92B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>10031FBB-CD36-4DDE-AA61-1642381CD7AF</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>1F48BB68-C11E-4C91-A9DA-E19098554E9A</string>
				<key>modifiers</key>
				<integer>1048576</integer>
				<key>modifiersubtext</key>
				<string>View in 1Password</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>64CCFE84-CB5E-435B-960C-0599C3287084</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9E56D02A-13BF-43CF-819E-6836C62FB87B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>66052526-8BC3-4DC3-B7B7-D2C2EF591CB7</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D1473B02-FE77-4435-9785-81D202C91533</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>666D7BDE-787B-44BD-A535-3F76541B7F8C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5B779377-8A0B-4819-9840-611C663A1004</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<true/>
			</dict>
		</array>
		<key>7277B529-365D-4D92-B874-22C6E407F47E</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>745206F1-E7CE-43E5-93E0-80BAC4DC608C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>666D7BDE-787B-44BD-A535-3F76541B7F8C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>7AF55FB7-58E3-49FB-B771-94EC70BF73CC</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>CFF178E5-E80D-498F-AE8A-6F701B4A1961</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>900A2A3E-D5CB-475C-996A-C6A8207DB171</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4FEB803E-78D2-4DAA-A493-0C499D3B3415</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>910FCF14-BDBB-4FF7-A7B2-41014E499149</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>3C6D1460-731F-4A4A-8836-8AD03743EE23</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>EEAE4AD1-7B81-409C-821C-00A1CA6056C4</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>985CB791-EA4E-4B3E-A04E-37A481C33035</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4AFED243-84FB-4005-B115-FFD8635E6737</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>9E56D02A-13BF-43CF-819E-6836C62FB87B</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5F00C180-A092-46F1-96FB-DD891562A2A8</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<true/>
			</dict>
		</array>
		<key>9F2CD8BE-EDF8-4AF5-897B-007C6FFF5E15</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>9FB513DD-70CB-4714-90C0-60C64D8A8784</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A8711759-B066-4A18-BB55-8A825C6FC01E</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>D775FDBF-FDA2-4FDE-9007-02111D660392</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>AADC9859-4CF2-43B3-831D-940B6BCBC278</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2166D3DB-EF96-4C03-B95A-77D5068615D7</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>AB4202F0-D40C-43BF-B596-C9F1B44B6DB7</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>CFF178E5-E80D-498F-AE8A-6F701B4A1961</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>66052526-8BC3-4DC3-B7B7-D2C2EF591CB7</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>D1473B02-FE77-4435-9785-81D202C91533</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>8F3F78DE-D7E9-44FD-ACC4-01D4B2E4E460</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>E0E63366-C846-4EB6-8625-9CCDD1637737</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>0DF753E5-DF21-4040-BC20-B06B9605360A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Vítor Galvão</string>
	<key>description</key>
	<string>Search and open 1Password items</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>1Password X</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>readonly items_hash_file="${alfred_workflow_data}/items_hash.txt"
readonly old_items_hash="$(/bin/cat "${items_hash_file}")"
readonly new_items_hash="$(/usr/bin/sqlite3 "${HOME}/Library/Group Containers/2BUA8C4S2C.com.1password/Library/Application Support/1Password/Data/1password.sqlite" 'SELECT * FROM item_overviews;' | md5)"

[[ "${old_items_hash}" == "${new_items_hash}" ]] &amp;&amp; exit 0

./1password.js 'data_update_detected'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>4FEB803E-78D2-4DAA-A493-0C499D3B3415</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string># Checks
if [[ -z "${alfred_workflow_bundleid}" ]]; then
  echo 'Workflow is missing bundle identifier!' &gt;&amp;2
  exit 1
fi

# Plist contents
read -r -d '' plist_contents &lt;&lt;ENDPLIST
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;${alfred_workflow_bundleid}&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/usr/bin/osascript&lt;/string&gt;
        &lt;string&gt;-e&lt;/string&gt;
        &lt;string&gt;tell application id &amp;quot;com.runningwithcrayons.Alfred&amp;quot; to run trigger &amp;quot;data_update_detected&amp;quot; in workflow &amp;quot;${alfred_workflow_bundleid}&amp;quot;&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;WatchPaths&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;~/Library/Group Containers/2BUA8C4S2C.com.1password/Library/Application Support/1Password/Data&lt;/string&gt;
    &lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;
ENDPLIST

# Main
readonly launchagents_dir="${HOME}/Library/LaunchAgents"
readonly plist_file="${launchagents_dir}/${alfred_workflow_bundleid}.plist"

if [[ "${auto_refresh}" -eq 0 ]]; then
  # Exit early if plist does not exist
  [[ -f "${plist_file}" ]] || exit 0

  # Uninstall agent
  launchctl bootout "gui/$(id -u "${USER}")" "${plist_file}"
  rm "${plist_file}"
else
  # Exit early if plist exists
  [[ -f "${plist_file}" ]] &amp;&amp; exit 0

  # Install agent
  mkdir -p "${launchagents_dir}"
  echo "${plist_contents}" &gt; "${plist_file}"
  launchctl bootstrap "gui/$(id -u "${USER}")" "${plist_file}"
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>triggerid</key>
				<string>data_update_detected</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>900A2A3E-D5CB-475C-996A-C6A8207DB171</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./op signout --all
./op account forget --all
rm -rf "${alfred_workflow_data}"
rm -rf "${alfred_workflow_cache}"
rm "${HOME}/Library/LaunchAgents/${alfred_workflow_bundleid}.plist"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>36A773EE-B145-4579-B70F-6D286604C92B</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>604864F3-BFC6-44E3-9B01-F23F5B25D77F</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./1password.js 'data_update_detected' # Add notice to update items

readonly script="$(mktemp)"

printf '#!/bin/zsh\n' &gt; "${script}"
printf 'clear\n' &gt;&gt; "${script}"
printf 'cat %q/instructions_banner.txt\n' "${PWD}" &gt;&gt; "${script}"
printf 'eval "$(%q/op account add --signin --shorthand %q)"\n' "${PWD}" "${1}" &gt;&gt; "${script}"
printf 'echo "\\nYou may close the terminal."\n' &gt;&gt; "${script}"
printf 'rm "${0}"\n' &gt;&gt; "${script}"

printf '%q' "${script}" # print without newline to avoid sending empty input to the first "op" question</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>subtext</key>
				<string>A short and unique identifier for this account</string>
				<key>text</key>
				<string>Account shorthand</string>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.keyword</string>
			<key>uid</key>
			<string>09BA5A7C-9F72-441C-95B2-46F669C53682</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>reset_accounts</string>
						<key>outputlabel</key>
						<string>Reset accounts</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>add_account</string>
						<key>outputlabel</key>
						<string>Add account</string>
						<key>uid</key>
						<string>2AC71A21-7210-4154-AE38-29A81884BE9F</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>manage_vaults</string>
						<key>outputlabel</key>
						<string>Manage vaults</string>
						<key>uid</key>
						<string>C84F022F-832E-431C-8EBE-74DB981EEFB8</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>manage_accounts</string>
						<key>outputlabel</key>
						<string>Manage accounts</string>
						<key>uid</key>
						<string>C8F2743C-1389-4043-83D1-7C2750A807F8</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Update items</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>4AFED243-84FB-4005-B115-FFD8635E6737</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./1password.js "${flip_type}" "${1}"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>D775FDBF-FDA2-4FDE-9007-02111D660392</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting vaults…</string>
				<key>script</key>
				<string>readonly file="${alfred_workflow_data}/vaults.json"

if [[ -f "${file}" ]]; then
  cat "${file}"
  exit 0
fi

echo '{ "items": [{
  "title": "Sign in and update items",
  "subtitle": "Your terminal will open with instructions",
  "arg": "update_items"
}] }'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Include or exclude vaults from results</string>
				<key>title</key>
				<string>Manage vaults</string>
				<key>type</key>
				<integer>5</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>666D7BDE-787B-44BD-A535-3F76541B7F8C</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.hidealfred</string>
			<key>uid</key>
			<string>E0E63366-C846-4EB6-8625-9CCDD1637737</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>fixedorder</key>
				<false/>
				<key>items</key>
				<string>[{"title":"Manage vaults","arg":"manage_vaults","subtitle":"Include or exclude vaults from results"},{"title":"Force update items","arg":"update_items","subtitle":"Your terminal will open with instructions"},{"title":"Add account","arg":"add_account","subtitle":"Use multiple accounts at once"},{"title":"Manage accounts","arg":"manage_accounts","subtitle":"Include or exclude accounts from results"},{"title":"Reset accounts","arg":"reset_accounts","subtitle":"Delete Workflow data"}]</string>
				<key>keyword</key>
				<string>:1pextras</string>
				<key>runningsubtext</key>
				<string></string>
				<key>subtext</key>
				<string>Uncommon but useful actions</string>
				<key>title</key>
				<string>1Password Extras</string>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.listfilter</string>
			<key>uid</key>
			<string>985CB791-EA4E-4B3E-A04E-37A481C33035</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>update_items</string>
						<key>outputlabel</key>
						<string>Update items</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Flip vault exclusion</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>5B779377-8A0B-4819-9840-611C663A1004</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>745206F1-E7CE-43E5-93E0-80BAC4DC608C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string>{query}</string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict>
					<key>flip_type</key>
					<string>flip_vault_exclusion</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>A8711759-B066-4A18-BB55-8A825C6FC01E</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>text</key>
				<string>Search 1Password for '{query}'</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.fallback</string>
			<key>uid</key>
			<string>AB4202F0-D40C-43BF-B596-C9F1B44B6DB7</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting accounts…</string>
				<key>script</key>
				<string>readonly file="${alfred_workflow_data}/users.json"
readonly op_path="$(printf '%q' "$(./1password.js op_path)")"

# If we detect active users
if [[ -n "$(${op_path} account list)" ]]; then
  # Create users JSON if it does not exist
  [[ -f "${file}" ]] || ./1password.js 'write_user_json'

  # Show self-updating users JSON
  ./1password.js 'print_user_json'

  exit 0
fi

echo '{ "items": [{
  "title": "Sign in and update items",
  "subtitle": "Your terminal will open with instructions",
  "arg": "update_items"
}] }'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Include or exclude accounts from results</string>
				<key>title</key>
				<string>Manage accounts</string>
				<key>type</key>
				<integer>5</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>9E56D02A-13BF-43CF-819E-6836C62FB87B</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.hidealfred</string>
			<key>uid</key>
			<string>5D3655AA-08CC-45D8-8B7B-ED639939DF1F</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>update_items</string>
						<key>outputlabel</key>
						<string>Update items</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Flip account exclusion</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>5F00C180-A092-46F1-96FB-DD891562A2A8</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>64CCFE84-CB5E-435B-960C-0599C3287084</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>0DF753E5-DF21-4040-BC20-B06B9605360A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string>{query}</string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict>
					<key>flip_type</key>
					<string>flip_user_exclusion</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>2BBDFBE4-FBBC-4506-9269-3CFB4017932C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>readonly script="$(mktemp)"

printf '#!/bin/zsh\n' &gt; "${script}"
printf 'clear\n' &gt;&gt; "${script}"
printf 'export alfred_workflow_data=%q\n' "${alfred_workflow_data}" &gt;&gt; "${script}"
printf 'export logins_only=%q\n' "${logins_only}" &gt;&gt; "${script}"
printf 'export hostnames_only=%q\n' "${hostnames_only}" &gt;&gt; "${script}"
printf '%q/signin.zsh\n' "${PWD}" &gt;&gt; "${script}"
printf 'rm "${0}"\n' &gt;&gt; "${script}"

printf '%q' "${script}" # print without newline to avoid sending empty input to the first "op" question</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string>  /bin/zsh {query}</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.terminalcommand</string>
			<key>uid</key>
			<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>update_items</string>
						<key>outputlabel</key>
						<string>Update items</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>10031FBB-CD36-4DDE-AA61-1642381CD7AF</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>2</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting items…</string>
				<key>script</key>
				<string>readonly file="${alfred_workflow_data}/items.json"

if [[ -f "${file}" ]]; then
  cat "${file}"
  exit 0
fi

# Disable 1Password 7 feature
readonly prefs_file="${alfred_preferences}/preferences/local/${alfred_preferences_localhash}/features/1password/prefs.plist"

if [[ -f "${prefs_file}" ]]; then
  /usr/libexec/PlistBuddy -c 'Delete :enabled' "${prefs_file}" 2&gt; /dev/null
fi

echo '{ "items": [{
  "title": "Sign in and update items",
  "subtitle": "Your terminal will open with instructions",
  "arg": "update_items"
}] }'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Show your 1Password items</string>
				<key>title</key>
				<string>1Password</string>
				<key>type</key>
				<integer>5</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string></string>
				<key>utf8</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>2166D3DB-EF96-4C03-B95A-77D5068615D7</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>action</key>
				<integer>0</integer>
				<key>argument</key>
				<integer>0</integer>
				<key>focusedappvariable</key>
				<false/>
				<key>focusedappvariablename</key>
				<string></string>
				<key>hotkey</key>
				<integer>0</integer>
				<key>hotmod</key>
				<integer>0</integer>
				<key>leftcursor</key>
				<false/>
				<key>modsmode</key>
				<integer>0</integer>
				<key>relatedAppsMode</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.hotkey</string>
			<key>uid</key>
			<string>5526B8BB-14D0-4271-94CE-0C7C2A1DC4E7</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>function run() {
  const itemID = $.NSProcessInfo.processInfo.environment.objectForKey("itemID").js
  const query = itemID + "=" + itemID

  const url = $.NSProcessInfo.processInfo.environment.objectForKey("url").js
  const urlObject = $.NSURL.URLWithString(url)

  if (urlObject.query.js === undefined) return url + "?" + query
  return url + "&amp;" + query
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>7</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>3C6D1460-731F-4A4A-8836-8AD03743EE23</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:url}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>1</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Open website</string>
						<key>uid</key>
						<string>EEAE4AD1-7B81-409C-821C-00A1CA6056C4</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>View in 1Password</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>910FCF14-BDBB-4FF7-A7B2-41014E499149</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.transform</string>
			<key>uid</key>
			<string>AADC9859-4CF2-43B3-831D-940B6BCBC278</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string># THESE VARIABLES MUST BE SET. SEE THE ONEUPDATER README FOR AN EXPLANATION OF EACH.
readonly remote_info_plist="https://raw.githubusercontent.com/alfredapp/1password-workflow/master/Workflow/info.plist"
readonly workflow_url="alfredapp/1password-workflow"
readonly download_type='github_release'
readonly frequency_check='4'

# FROM HERE ON, CODE SHOULD BE LEFT UNTOUCHED!
function abort {
  echo "${1}" &gt;&amp;2
  exit 1
}

function url_exists {
  curl --silent --location --output /dev/null --fail --range 0-0 "${1}"
}

function notification {
  local -r notificator="$(find . -type d -name 'Notificator.app')"
  if [[ -n "${notificator}" ]]; then
    "${notificator}/Contents/Resources/Scripts/notificator" --message "${1}" --title "${alfred_workflow_name}" --subtitle 'A new version is available'
    return
  fi

  local -r terminal_notifier="$(find . -type f -name 'terminal-notifier')"
  if [[ -n "${terminal_notifier}" ]]; then
    "${terminal_notifier}" -title "${alfred_workflow_name}" -subtitle 'A new version is available' -message "${1}"
    return
  fi

  osascript -e "display notification \"${1}\" with title \"${alfred_workflow_name}\" subtitle \"A new version is available\""
}

# Local sanity checks
readonly local_info_plist='info.plist'
readonly local_version="$(/usr/libexec/PlistBuddy -c 'print version' "${local_info_plist}")"

[[ -n "${local_version}" ]] || abort 'You need to set a workflow version in the configuration sheet.'
[[ "${download_type}" =~ ^(direct|page|github_release)$ ]] || abort "'download_type' (${download_type}) needs to be one of 'direct', 'page', or 'github_release'."
[[ "${frequency_check}" =~ ^[0-9]+$ ]] || abort "'frequency_check' (${frequency_check}) needs to be a number."

# Check for updates
if [[ $(find "${local_info_plist}" -mtime +"${frequency_check}"d) ]]; then
  if ! url_exists "${remote_info_plist}"; then abort "'remote_info_plist' (${remote_info_plist}) appears to not be reachable."; fi # Remote sanity check

  readonly tmp_file="$(mktemp)"
  curl --silent --location --output "${tmp_file}" "${remote_info_plist}"
  readonly remote_version="$(/usr/libexec/PlistBuddy -c 'print version' "${tmp_file}")"

  if [[ "${local_version}" == "${remote_version}" ]]; then
    touch "${local_info_plist}" # Reset timer by touching local file
    exit 0
  fi

  if [[ "${download_type}" == 'page' ]]; then
    notification 'Opening download page…'
    open "${workflow_url}"
    exit 0
  fi

  download_url="$([[ "${download_type}" == 'github_release' ]] &amp;&amp; curl --silent "https://api.github.com/repos/${workflow_url}/releases/latest" | grep 'browser_download_url' | head -1 | sed -E 's/.*browser_download_url": "(.*)"/\1/' || echo "${workflow_url}")"

  if url_exists "${download_url}"; then
    notification 'Downloading and installing…'
    curl --silent --location --output "${HOME}/Downloads/${alfred_workflow_name}.alfredworkflow" "${download_url}"
    open "${HOME}/Downloads/${alfred_workflow_name}.alfredworkflow"
  else
    abort "'workflow_url' (${download_url}) appears to not be reachable."
  fi
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>keyword</key>
				<string>1p</string>
				<key>subtext</key>
				<string>Find and open a 1Password 1Click Bookmark</string>
				<key>text</key>
				<string>1Password Bookmark '...'</string>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.keyword</string>
			<key>uid</key>
			<string>9F2CD8BE-EDF8-4AF5-897B-007C6FFF5E15</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string>onepassword://view-item/?a={var:accountID}&amp;v={var:vaultID}&amp;i={var:itemID}</string>
				<key>utf8</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>1F48BB68-C11E-4C91-A9DA-E19098554E9A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>keyword</key>
				<string>!1pdiagnostic</string>
				<key>subtext</key>
				<string>Result will be copied to the clipboard</string>
				<key>text</key>
				<string>Diagnose 1Password Issues</string>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.keyword</string>
			<key>uid</key>
			<string>7AF55FB7-58E3-49FB-B771-94EC70BF73CC</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>echo '### Workflow version'
/usr/libexec/PlistBuddy -c 'print version' info.plist

echo
echo '### Alfred version'
/usr/bin/osascript -e 'tell application id "com.runningwithcrayons.Alfred" to return version'

echo
echo '### macOS version'
/usr/bin/sw_vers -productVersion

echo
echo '### Architecture'
/usr/bin/arch
echo

echo
echo '### Workflow environment variables'
/usr/libexec/PlistBuddy -c 'print variables' info.plist

echo
echo '### 1Password version'
/usr/bin/osascript -e 'tell application id "com.1password.1password" to return version'

echo
echo '### op version'

echo -n 'In Workflow: '
./op --version
echo -n 'In /usr/local: '

if [[ -x '/usr/local/bin/op' ]]; then
  /usr/local/bin/op --version
else
  echo 'NOT installed'
fi

echo
echo '### Biometric unlock'

if [[ "$(./1password.js 'biometric_unlock_enabled')" == 'true' ]]; then
  echo 'Enabled'
else
  echo 'NOT enabled'
fi

echo
echo '### Custom terminal feature'

if /usr/libexec/PlistBuddy -c 'Print :application' "${alfred_preferences}/preferences/features/terminal/prefs.plist" &amp;&gt; /dev/null; then
  echo 'Enabled'
else
  echo 'NOT enabled'
fi

echo
echo '### Launchd job'

if launchctl list | grep -q "${alfred_workflow_bundleid}"; then
  echo -n 'Loaded: '
  launchctl list | grep "${alfred_workflow_bundleid}"
else
  echo 'NOT loaded'
fi

if [[ -f "${HOME}/Library/LaunchAgents/${alfred_workflow_bundleid}.plist" ]]; then
  echo 'Installed'
else
  echo 'NOT installed'
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>CFF178E5-E80D-498F-AE8A-6F701B4A1961</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>autopaste</key>
				<false/>
				<key>clipboardtext</key>
				<string>{query}</string>
				<key>ignoredynamicplaceholders</key>
				<false/>
				<key>transient</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.clipboard</string>
			<key>uid</key>
			<string>66052526-8BC3-4DC3-B7B7-D2C2EF591CB7</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>soundname</key>
				<string>Submarine</string>
				<key>systemsound</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.playsound</string>
			<key>uid</key>
			<string>8F3F78DE-D7E9-44FD-ACC4-01D4B2E4E460</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>lastpathcomponent</key>
				<false/>
				<key>onlyshowifquerypopulated</key>
				<false/>
				<key>removeextension</key>
				<false/>
				<key>text</key>
				<string>Paste it where it was requested</string>
				<key>title</key>
				<string>Diagnosis finished</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.notification</string>
			<key>uid</key>
			<string>D1473B02-FE77-4435-9785-81D202C91533</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>&gt; Make a little change based on vitor. In terms of experience, try to keep the same function as Alfred's original 1Password


This Workflow is for 1Password 8. For older versions, see Alfred Preferences → Features → 1Password.

Use `1p` to interact with your 1Password items.

On first run you’ll need to set up your account with 1Password’s official command-line tool. Your terminal will open and guide you through the process.

![](https://user-images.githubusercontent.com/1699443/164914491-1c1b4da5-a0b1-4cdf-9881-a62a8e5a7162.png)

From then on, `1p` will show your items. ↵ opens the website in your browser (and fills the credentials if you have the browser extension installed) while ⌘↵ opens the item in 1Password.

![](https://user-images.githubusercontent.com/1699443/167198194-cb5bf2b7-52ee-4b39-bf0a-a921eb63c26d.png)

The Workflow will attempt to detect when you update items in 1Password and present you with the option to refresh them. You can disable this behaviour by flipping the `auto_refresh` Workflow Environment Variable to `0`. Set `logins_only` to `1` if you want to hide other item types. Set `hostnames_only` to `0` if you want to see full URLs in results.

Uncommon but useful actions, such as toggling vaults, can be accessed via `:1pextras`.

![](https://user-images.githubusercontent.com/1699443/165388195-40975de6-6fe4-4607-96d9-ce96d835ac73.png)

![](https://user-images.githubusercontent.com/1699443/166268572-bc504873-5ff0-43a1-b76c-90bf380d8633.png)

`!gddiagnostic` inspects the current Workflow configuration. It is to be run when asking for help.</string>
	<key>uidata</key>
	<dict>
		<key>09BA5A7C-9F72-441C-95B2-46F669C53682</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>305</integer>
		</dict>
		<key>0DF753E5-DF21-4040-BC20-B06B9605360A</key>
		<dict>
			<key>note</key>
			<string>Continue to update items</string>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>595</integer>
		</dict>
		<key>10031FBB-CD36-4DDE-AA61-1642381CD7AF</key>
		<dict>
			<key>xpos</key>
			<integer>320</integer>
			<key>ypos</key>
			<integer>720</integer>
		</dict>
		<key>1F48BB68-C11E-4C91-A9DA-E19098554E9A</key>
		<dict>
			<key>xpos</key>
			<integer>410</integer>
			<key>ypos</key>
			<integer>1015</integer>
		</dict>
		<key>2166D3DB-EF96-4C03-B95A-77D5068615D7</key>
		<dict>
			<key>note</key>
			<string>Open and fill in web browser</string>
			<key>xpos</key>
			<integer>935</integer>
			<key>ypos</key>
			<integer>825</integer>
		</dict>
		<key>2BBDFBE4-FBBC-4506-9269-3CFB4017932C</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>625</integer>
		</dict>
		<key>36A773EE-B145-4579-B70F-6D286604C92B</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>175</integer>
		</dict>
		<key>3C6D1460-731F-4A4A-8836-8AD03743EE23</key>
		<dict>
			<key>note</key>
			<string>Add parameter to URL for open and fill</string>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>825</integer>
		</dict>
		<key>4AFED243-84FB-4005-B115-FFD8635E6737</key>
		<dict>
			<key>xpos</key>
			<integer>230</integer>
			<key>ypos</key>
			<integer>410</integer>
		</dict>
		<key>4FEB803E-78D2-4DAA-A493-0C499D3B3415</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>335</integer>
		</dict>
		<key>5526B8BB-14D0-4271-94CE-0C7C2A1DC4E7</key>
		<dict>
			<key>xpos</key>
			<integer>40</integer>
			<key>ypos</key>
			<integer>825</integer>
		</dict>
		<key>5B779377-8A0B-4819-9840-611C663A1004</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>455</integer>
		</dict>
		<key>5D3655AA-08CC-45D8-8B7B-ED639939DF1F</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>565</integer>
		</dict>
		<key>5F00C180-A092-46F1-96FB-DD891562A2A8</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>585</integer>
		</dict>
		<key>604864F3-BFC6-44E3-9B01-F23F5B25D77F</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>205</integer>
		</dict>
		<key>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</key>
		<dict>
			<key>xpos</key>
			<integer>180</integer>
			<key>ypos</key>
			<integer>735</integer>
		</dict>
		<key>64CCFE84-CB5E-435B-960C-0599C3287084</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>595</integer>
		</dict>
		<key>66052526-8BC3-4DC3-B7B7-D2C2EF591CB7</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>1160</integer>
		</dict>
		<key>666D7BDE-787B-44BD-A535-3F76541B7F8C</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>7277B529-365D-4D92-B874-22C6E407F47E</key>
		<dict>
			<key>note</key>
			<string>View in 1Password</string>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>990</integer>
		</dict>
		<key>745206F1-E7CE-43E5-93E0-80BAC4DC608C</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>465</integer>
		</dict>
		<key>7AF55FB7-58E3-49FB-B771-94EC70BF73CC</key>
		<dict>
			<key>note</key>
			<string>Diagnose Workflow</string>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>1160</integer>
		</dict>
		<key>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</key>
		<dict>
			<key>xpos</key>
			<integer>935</integer>
			<key>ypos</key>
			<integer>695</integer>
		</dict>
		<key>8F3F78DE-D7E9-44FD-ACC4-01D4B2E4E460</key>
		<dict>
			<key>xpos</key>
			<integer>935</integer>
			<key>ypos</key>
			<integer>1160</integer>
		</dict>
		<key>900A2A3E-D5CB-475C-996A-C6A8207DB171</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>910FCF14-BDBB-4FF7-A7B2-41014E499149</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>845</integer>
		</dict>
		<key>985CB791-EA4E-4B3E-A04E-37A481C33035</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>9E56D02A-13BF-43CF-819E-6836C62FB87B</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>565</integer>
		</dict>
		<key>9F2CD8BE-EDF8-4AF5-897B-007C6FFF5E15</key>
		<dict>
			<key>xpos</key>
			<integer>40</integer>
			<key>ypos</key>
			<integer>990</integer>
		</dict>
		<key>9FB513DD-70CB-4714-90C0-60C64D8A8784</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>695</integer>
		</dict>
		<key>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>305</integer>
		</dict>
		<key>A8711759-B066-4A18-BB55-8A825C6FC01E</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>495</integer>
		</dict>
		<key>AADC9859-4CF2-43B3-831D-940B6BCBC278</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>855</integer>
		</dict>
		<key>AB4202F0-D40C-43BF-B596-C9F1B44B6DB7</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>565</integer>
		</dict>
		<key>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</key>
		<dict>
			<key>note</key>
			<string>launchd agent</string>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>AE76F4A7-146D-417D-9F3D-F6A410C9C970</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>note</key>
			<string>OneUpdater</string>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>990</integer>
		</dict>
		<key>CFF178E5-E80D-498F-AE8A-6F701B4A1961</key>
		<dict>
			<key>xpos</key>
			<integer>230</integer>
			<key>ypos</key>
			<integer>1160</integer>
		</dict>
		<key>D1473B02-FE77-4435-9785-81D202C91533</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>1160</integer>
		</dict>
		<key>D775FDBF-FDA2-4FDE-9007-02111D660392</key>
		<dict>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>E0E63366-C846-4EB6-8625-9CCDD1637737</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
	</dict>
	<key>variables</key>
	<dict>
		<key>auto_refresh</key>
		<string>1</string>
		<key>hostnames_only</key>
		<string>1</string>
		<key>logins_only</key>
		<string>0</string>
	</dict>
	<key>variablesdontexport</key>
	<array/>
	<key>version</key>
	<string>2022.12.x</string>
	<key>webaddress</key>
	<string>https://github.com/alfredapp/1password-workflow/</string>
</dict>
</plist>
